<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Votación Usuario 1</title>
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>
<div class="container">
  <h1>Votación Usuario 1</h1>
  <form id="form">
    <div id="paises"></div>
    <button type="submit" class="btn">Guardar votación</button>
  </form>
</div>
<script>
const paises = [
  { nombre: "Suecia", codigo: "se" },
  { nombre: "España", codigo: "es" },
  { nombre: "Italia", codigo: "it" },
  { nombre: "Francia", codigo: "fr" },
  { nombre: "Alemania", codigo: "de" },
  { nombre: "Grecia", codigo: "gr" },
  { nombre: "Noruega", codigo: "no" },
  { nombre: "Reino Unido", codigo: "gb" },
  { nombre: "Polonia", codigo: "pl" },
  { nombre: "Ucrania", codigo: "ua" }
];

const contenedor = document.getElementById("paises");
paises.forEach(p => {
  const div = document.createElement("div");
  div.className = "pais";
  div.innerHTML = `
    <img src="images/${p.codigo}.svg" alt="${p.nombre}">
    <label>${p.nombre}</label>
    <select name="${p.nombre}">
      <option value="">--</option>
      ${[12,10,8,7,6,5,4,3,2,1].map(n => `<option value='${n}'>${n}</option>`).join('')}
    </select>
  `;
  contenedor.appendChild(div);
});

document.getElementById("form").addEventListener("submit", e => {
  e.preventDefault();
  const data = new FormData(e.target);
  const usados = new Set();
  const votos = [];
  for (let [pais, puntos] of data.entries()) {
    if (!puntos || usados.has(puntos)) {
      alert("Puntos duplicados o vacíos.");
      return;
    }
    usados.add(puntos);
    votos.push({ pais, puntos: Number(puntos) });
  }
  if (votos.length !== 10) {
    alert("Debes puntuar los 10 países.");
    return;
  }
  localStorage.setItem("votos_usuario1", JSON.stringify(votos));
  alert("✅ Votación guardada.");
});
</script>
</body>
</html>